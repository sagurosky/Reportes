<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.tymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:replace="plantillas/plantilla::head">
    <title>Menú Principal</title>
    <meta charset="UTF-8"/>
</head>
<body>
<style>
    body {
        background: url('/recursos/img8.jpg') no-repeat center center fixed;
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        min-height: 100vh;
    }
    .section-title {
        margin-bottom: 20px;
        color: #fff;
        text-shadow: 1px 1px 3px rgba(0,0,0,0.8);
    }
    .btn-menu {
        width: 220px;
        height: 110px;
        font-size: 1.1rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        border-radius: 10px;
        margin: 8px;
    }
    .btn-menu i {
        font-size: 2rem;
        margin-bottom: 8px;
    }
    .btn-sm {
        width: 120px;
        height: 50px;
        font-size: 0.9rem;
    }
    .card-translucent {
        background-color: rgba(105, 105, 105, 0.6);
        border-radius: 10px;
        padding: 30px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.3);
    }
    .button-group {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 10px;
    }
    .hidden {
        display: none;
    }
    .btn-eventos {
        background-color: #1e88e5;
        color: white;
    }


    /* Botones principales */
.btn-stock { background-color: #007b8a; color: white; }
.btn-caja { background-color: #ff9800; color: white; }
.btn-pedido { background-color: #7e57c2; color: white; }

/* Botones secundarios por módulo */
.stock-1 { background-color: #0097a7; color: white; }
.stock-2 { background-color: #00bcd4; color: white; }
.stock-3 { background-color: #80deea; color: black; }
.stock-4 { background-color: #b2ebf2; color: black; }

.caja-1 { background-color: #ffa726; color: black; }
.caja-2 { background-color: #ffb74d; color: black; }
.caja-3 { background-color: #ffcc80; color: black; }
.caja-4 { background-color: #ffe0b2; color: black; }

.pedido-1 { background-color: #9575cd; color: white; }
.pedido-2 { background-color: #b39ddb; color: white; }
.pedido-3 { background-color: #d1c4e9; color: black; }
.pedido-4 { background-color: #ede7f6; color: black; }


</style>

<header th:replace="plantillas/plantilla::header"></header>

<div class="container py-5">

    <!-- Panel de Administración -->
    <div class="card card-translucent mb-5">
        <h2 class="section-title text-center">Panel de Administración</h2>
        <div class="d-flex flex-wrap justify-content-center gap-4">
            <div sec:authorize="hasAuthority('ROLE_ADMIN')">
                <a th:href="@{/gestionUsuarios/}" class="btn btn-primary btn-menu">
                    <i class="bi bi-people-fill"></i>
                    Gestión de Usuarios
                </a>
            </div>
            <div>
                <a th:href="@{/sucursales/}" class="btn btn-success btn-menu">
                    <i class="bi bi-building"></i>
                    Gestión de Sucursales
                </a>
            </div>
            <div>
                <a th:href="@{/eventosCarga/}" class="btn btn-eventos btn-menu">
                    <i class="bi bi-clipboard-data"></i>
                    Eventos de Carga
                </a>
            </div>

            <!--
            <div>
                <a href="#" class="btn btn-warning btn-menu">
                    <i class="bi bi-gift-fill"></i>
                    Gestión de Promociones
                </a>
            </div>
            <div>
                <a href="#" class="btn btn-danger btn-menu">
                    <i class="bi bi-credit-card-2-front-fill"></i>
                    Gestión de Tarjeta Arancel
                </a>
            </div>
            -->
        </div>
    </div>

    <!-- Módulos -->
    <div class="card card-translucent">
        <h2 id="modulos-title" class="section-title text-center">Módulos</h2>

        <!-- Botones principales (siempre visibles) -->
        <div id="main-buttons" class="button-group">
            <button class="btn btn-stock btn-menu" onclick="showSecondaryButtons('stock')">
                <i class="bi bi-boxes"></i>
                Stock
            </button>
            <button class="btn btn-caja btn-menu" onclick="showSecondaryButtons('caja')">
                <i class="bi bi-cash-coin"></i>
                Caja
            </button>
            <button class="btn btn-pedido btn-menu" onclick="showSecondaryButtons('pedido')">
                <i class="bi bi-cart-check"></i>
                Pedido
            </button>
        </div>

        <!-- Botones secundarios (inicialmente ocultos) -->
        <div id="secondary-buttons" class="hidden">
            <!--            <h3 id="context-title" class="context-title"></h3>-->
            <div class="button-group">
                <a id="btn-cargar" class="btn btn-info btn-menu" href="#">
                    <i class="bi bi-upload"></i>
                    Cargar archivo
                </a>
                <a id="btn-faltantes" class="btn btn-info btn-menu" href="#">
                    <i class="bi bi-file-excel"></i>
                    Archivos faltantes
                </a>
                <a id="btn-diferencias" class="btn btn-info btn-menu" href="#">
                    <i class="bi bi-file-diff"></i>
                    Diferencias
                </a>
                <a id="btn-reportes" class="btn btn-info btn-menu" href="#">
                    <i class="bi bi-graph-up"></i>
                    Reportes
                </a>
                <button class="btn btn-secondary btn-menu" onclick="hideSecondaryButtons()">
                    <i class="bi bi-arrow-left"></i>
                    Volver
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css ">
<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js "></script>

<script>
    // Función para mostrar los botones secundarios
    function showSecondaryButtons(context) {
        // Ocultar botones principales
        document.getElementById('main-buttons').classList.add('hidden');

        // Mostrar botones secundarios
        document.getElementById('secondary-buttons').classList.remove('hidden');

        // Cambiar el título principal a "Módulo de [contexto]"
        document.getElementById('modulos-title').textContent = 'Módulo de ' + context.charAt(0).toUpperCase() + context.slice(1);

        // Establecer el título del contexto (opcional, si quieres mantenerlo)
<!--        document.getElementById('context-title').textContent = 'Módulo de ' + context.charAt(0).toUpperCase() + context.slice(1);-->

        // Configurar los endpoints según el contexto
        const cargarBtn = document.getElementById('btn-cargar');
        const faltantesBtn = document.getElementById('btn-faltantes');
        const diferenciasBtn = document.getElementById('btn-diferencias');
        const reportesBtn = document.getElementById('btn-reportes');

        // Limpiar clases anteriores
        [cargarBtn, faltantesBtn, diferenciasBtn, reportesBtn].forEach(btn => {
            btn.className = 'btn btn-menu'; // base
        });


        // Aquí defines los endpoints según el contexto
        if (context === 'stock') {
            cargarBtn.classList.add('stock-1');
            faltantesBtn.classList.add('stock-2');
            diferenciasBtn.classList.add('stock-3');
            reportesBtn.classList.add('stock-4');
            cargarBtn.href = '/cargarArchivos/stock?color=stock-1';
            faltantesBtn.href = '/faltantes/stock?color=stock-2';
            diferenciasBtn.href = '/diferencias/stock?color=stock-3';
            reportesBtn.href = '/reportes/stock?color=stock-4';
        } else if (context === 'caja') {
            cargarBtn.classList.add('caja-1');
            faltantesBtn.classList.add('caja-2');
            diferenciasBtn.classList.add('caja-3');
            reportesBtn.classList.add('caja-4');
            cargarBtn.href = '/cargarArchivos/caja?color=caja-1';
            faltantesBtn.href = '/faltantes/caja?color=caja-2';
            diferenciasBtn.href = '/diferencias/caja?color=caja-3';
            reportesBtn.href = '/reportes/caja?color=caja-4';
        } else if (context === 'pedido') {
            cargarBtn.classList.add('pedido-1');
            faltantesBtn.classList.add('pedido-2');
            diferenciasBtn.classList.add('pedido-3');
            reportesBtn.classList.add('pedido-4');
            cargarBtn.href = '/cargarArchivos/pedido?color=pedido-1';
            faltantesBtn.href = '/faltantes/pedido?color=pedido-2';
            diferenciasBtn.href = '/diferencias/pedido?color=pedido-3';
            reportesBtn.href = '/reportes/pedido?color=pedido-4';
        }
    }

    // Función para ocultar los botones secundarios y mostrar los principales
    function hideSecondaryButtons() {
        // Ocultar botones secundarios
        document.getElementById('secondary-buttons').classList.add('hidden');

        // Mostrar botones principales
        document.getElementById('main-buttons').classList.remove('hidden');

        // Restaurar el título a "Módulos"
        document.getElementById('modulos-title').textContent = 'Módulos';
    }
</script>
</body>
</html>